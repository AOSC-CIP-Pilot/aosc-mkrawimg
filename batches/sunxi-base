#! /bin/bash

rm -f out/* aux_log/*

sunxi_devices_list="
sun4i-a10-cubieboard
sun7i-a20-cubietruck

sun8i-h2-plus-orangepi-zero
sun8i-h3-orangepi-one
sun8i-h3-orangepi-plus
sun8i-h3-nanopi-neo
"
export SOLUTION=sunxi-base
# TARBALL environment variable is needed
for i in $sunxi_devices_list
do
	DEVICE_NAME=$i ./raw-image-builder
	for j in out/*.img # Uncompressed ones
	do
		xz $XZFLAGS $j
		for k in md5 sha1 sha512
		do
			${k}sum $j.xz | awk '{print $1}' > $j.xz.${k}sum
		done
	done
done
